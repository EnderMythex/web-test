<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="/manifest.json">
  <title>PWA Installation</title>
</head>
<body>
  <button id="installApp" style="display: none;">Installer l'Application</button>

  <script>
    let deferredPrompt;

    window.addEventListener('beforeinstallprompt', (event) => {
      // Empêcher l'affichage automatique de l'invite
      event.preventDefault();
      deferredPrompt = event;
      // Afficher le bouton "Installer"
      const installButton = document.getElementById('installApp');
      installButton.style.display = 'block';

      installButton.addEventListener('click', () => {
        // Afficher l'invite d'installation
        deferredPrompt.prompt();

        // Vérifier la réponse de l'utilisateur
        deferredPrompt.userChoice.then((choice) => {
          if (choice.outcome === 'accepted') {
            console.log('Utilisateur a accepté l’installation');
          } else {
            console.log('Utilisateur a refusé l’installation');
          }
          deferredPrompt = null;
        });
      });
    });
  </script>
</body>
</html>
